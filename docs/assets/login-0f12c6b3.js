import{d as U,a8 as Z,c as D,e as p,ap as G,r as x,o as g,g as K,k as a,p as v,w as t,q as e,G as l,L as k,M as S,P as C,aq as _,i as d,S as I,H as m,x as R,V as Y,t as j,v as b,K as h,s as q,N as B,O as P,bi as $,bh as A,Z as L}from"./index-5c38423f.js";import{r as N,e as H}from"./validators-c9ab5527.js";import{V as T}from"./VForm-dc4a2fdf.js";import{V as z}from"./VTextField-d9a643ab.js";import{V as O}from"./VCheckbox-34da30ff.js";import{b as F}from"./route-block-83d24a4e.js";import"./VInput-098737cb.js";import"./forwardRefs-a29b5f65.js";import"./easing-9f15041e.js";import"./VCheckboxBtn-8aee069e.js";import"./VSelectionControl-7d260e9f.js";const J={class:"text-h4 mb-1"},Q={class:"mb-0"},W={class:"d-flex align-center flex-wrap justify-space-between mt-2 mb-4"},X={class:"d-flex"},ee={class:"text-h4 mb-1"},te={class:"mb-0"},ae={class:"d-flex align-center flex-wrap justify-space-between mt-2 mb-4"},se=U({__name:"login",setup(le){const y=Z(),E=D(),c=p(!1),r=p({userid:"",password:"",remember:!1}),w=async()=>{c.value=!0;try{const s=await L.post("/users/login/",{email:r.value.userid,password:r.value.password},{withCredentials:!0});localStorage.setItem("authToken",s.data.jwt),localStorage.setItem("first_name",s.data.first_name),localStorage.setItem("last_name",s.data.last_name),localStorage.setItem("address",s.data.address),localStorage.setItem("contact_number",s.data.contact_number),localStorage.setItem("email",s.data.email),c.value=!1,E.replace(y.query.to?String(y.query.to):"/")}catch(s){console.error("Login error:",s),c.value=!1}},f=p(!1),i=p({logo:"",banner:"https://images.squarespace-cdn.com/content/v1/5df2e96175170a0bfdc2f31c/1663082905449-BZSYII4RA5ZKF5E019VY/CB+-+Granite+Ridge+12.jpeg?format=2500w",heading_1:"",heading_2:"",body:""}),M=async()=>{try{const s=await L.get("/contents/login_page/");i.value=s.data[0]}catch(s){console.log(s)}};return G(()=>{M()}),(s,n)=>{const o=x("PuSkeleton"),V=x("RouterLink");return g(),K("div",null,[a(i).body?R("",!0):(g(),v(m,{key:0,class:"auth-wrapper",style:{"max-inline-size":"300rem"}},{default:t(()=>[e(l,{cols:"12",md:"4",class:"auth-card-v2 d-flex align-center justify-center",style:{"background-color":"rgb(var(--v-theme-surface))"}},{default:t(()=>[e(k,{flat:"",class:"mt-12 mt-sm-0 pa-6"},{default:t(()=>[e(S,{class:"justify-start"},{default:t(()=>[e(o,{width:"200px",height:"2rem"}),e(C,{class:"auth-title"},{default:t(()=>[e(o)]),_:1})]),_:1}),e(_,null,{default:t(()=>[d("h6",J,[e(o)]),d("p",Q,[e(o)])]),_:1}),e(_,null,{default:t(()=>[e(a(T),{onSubmit:I(w,["prevent"])},{default:t(()=>[e(m,null,{default:t(()=>[e(l,{cols:"12"},{default:t(()=>[e(o,{height:"2rem"})]),_:1}),e(l,{cols:"12"},{default:t(()=>[e(o,{height:"2rem"}),d("div",W,[e(o,{width:"150px"}),e(o,{width:"150px"})]),e(m,null,{default:t(()=>[e(l,{cols:"12",md:"4"},{default:t(()=>[e(o,{height:"2rem"})]),_:1}),e(l,{cols:"12",md:"4"},{default:t(()=>[e(o,{height:"2rem"})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1})]),_:1}),e(l,{md:"8",class:"px-0"},{default:t(()=>[e(o,{height:"100vh"})]),_:1})]),_:1})),a(i).body?(g(),v(m,{key:1,class:"auth-wrapper",style:{"max-inline-size":"300rem"}},{default:t(()=>[e(l,{cols:"12",md:"4",class:"auth-card-v2 d-flex align-center justify-center",style:{"background-color":"rgb(var(--v-theme-surface))"}},{default:t(()=>[e(k,{flat:"","max-width":800,class:"mt-12 mt-sm-0 pa-6"},{default:t(()=>[e(S,{class:"justify-start"},{prepend:t(()=>[e(V,{to:"/"},{default:t(()=>[d("div",X,[e(a(Y),{nodes:a(j).app.logo},null,8,["nodes"])])]),_:1})]),default:t(()=>[e(C,{class:"auth-title"},{default:t(()=>[b(h(a(j).app.title),1)]),_:1})]),_:1}),e(_,null,{default:t(()=>[d("h6",ee,h(a(i).heading_1),1),d("p",te,h(a(i).body),1)]),_:1}),e(_,null,{default:t(()=>[e(a(T),{onSubmit:I(w,["prevent"])},{default:t(()=>[e(m,null,{default:t(()=>[e(l,{cols:"12"},{default:t(()=>[e(z,{modelValue:a(r).userid,"onUpdate:modelValue":n[0]||(n[0]=u=>a(r).userid=u),autofocus:"",label:"Email",type:"text",rules:[a(N),a(H)]},null,8,["modelValue","rules"])]),_:1}),e(l,{cols:"12"},{default:t(()=>[e(z,{modelValue:a(r).password,"onUpdate:modelValue":n[1]||(n[1]=u=>a(r).password=u),label:"Password",type:a(f)?"text":"password","append-inner-icon":a(f)?"bx-hide":"bx-show",required:"",rules:[a(N)],"onClick:appendInner":n[2]||(n[2]=u=>f.value=!a(f))},null,8,["modelValue","type","append-inner-icon","rules"]),d("div",ae,[e(O,{modelValue:a(r).remember,"onUpdate:modelValue":n[3]||(n[3]=u=>a(r).remember=u),label:"Remember me"},null,8,["modelValue"]),e(V,{class:"text-primary ms-2",to:{name:"forgot-password"}},{default:t(()=>[b(" Forgot Password? ")]),_:1})]),e(m,null,{default:t(()=>[e(l,{cols:"12",md:"4"},{default:t(()=>[e(q,{type:"submit",block:""},{default:t(()=>[B(d("div",null," Login ",512),[[P,!a(c)]]),B(e($,{indeterminate:"",color:"white"},null,512),[[P,a(c)]])]),_:1})]),_:1}),e(l,{cols:"12",md:"4"},{default:t(()=>[e(q,{block:"",class:"mb-1",variant:"outlined",to:{name:"register"}},{default:t(()=>[b(" Signup ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1})]),_:1}),e(l,{md:"8",class:"d-none d-md-flex pa-0",style:A(`background-image: url('${a(i).banner}'); background-position: center; background-size: cover;`)},null,8,["style"])]),_:1})):R("",!0)])}}});typeof F=="function"&&F(se);export{se as default};
