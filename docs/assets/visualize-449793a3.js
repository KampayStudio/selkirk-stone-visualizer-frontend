import{d as N,e as u,an as P,o as d,p as W,w as a,q as s,$ as g,a0 as m,i,g as f,F as v,H as w,I as R,k as _,ao as z,ap as H,aq as X,s as j,v as B,ar as Y}from"./index-3df34c37.js";const F={class:"image-container"},L=["src"],D={class:"text-h6 text-secondary"},O=i("h1",{class:"text-h4"}," Choose Stone ",-1),G=i("p",{class:"text-body-2 mt-3"}," Please choose a stone category you want to apply on the wall. ",-1),J={class:"carousel_item"},K={class:"image-mask"},Q=["src"],Z=N({__name:"visualize",props:["image","selectedWall"],setup(h){const S=h,p=u([]),k=u([]),I=u([{image:"/temp/stone.jpeg"},{image:"/temp/stone.jpeg"},{image:"/temp/stone.jpeg"},{image:"/temp/stone.jpeg"}]);u({itemsToShow:itemsToShow||1,snapAlign:snapAlign||"center"});const M={700:{itemsToShow:3.5,snapAlign:"center"},1024:{itemsToShow:5,snapAlign:"start"}};u();const $=(e,o,l)=>e.map(t=>({x:t.x*o,y:t.y*l})),q=(e,o,l)=>{const t=e.getContext("2d");let n=1/0,c=1/0,y=-1/0,x=-1/0;o.forEach(r=>{n=Math.min(n,r.x),c=Math.min(c,r.y),y=Math.max(y,r.x),x=Math.max(x,r.y)});const E=y-n,T=x-c;e.width=E,e.height=T,e.style.left=`${n}px`,e.style.top=`${c}px`,l.style.left=`${n}px`,l.style.top=`${c}px`,t.clearRect(0,0,E,T),t.fillStyle="rgba(26, 78, 25, 1)",t.beginPath(),o.forEach((r,A)=>{const b=r.x-n,V=r.y-c;A===0?t.moveTo(b,V):t.lineTo(b,V)}),t.closePath(),t.fill()},C=()=>{const e=document.querySelector(".image-container img");if(!e)return;const o=e.clientWidth/e.naturalWidth,l=e.clientHeight/e.naturalHeight;S.image.wall_shape.shapes.forEach((t,n)=>{const c=$(t,o,l);p.value[n]&&q(p.value[n],c,k.value[n])})};return P(()=>{const e=document.querySelector(".image-container img");e.complete?C():e.addEventListener("load",C)}),(e,o)=>(d(),W(Y,null,{default:a(()=>[s(g,null,{default:a(()=>[s(m,{cols:"7",class:"d-flex justify-center"},{default:a(()=>[i("div",F,[i("img",{src:h.image.image,class:"img-background"},null,8,L),(d(!0),f(v,null,w(h.image.wall_shape.shapes,(l,t)=>(d(),f("canvas",{key:t,ref_for:!0,ref_key:"canvasRefs",ref:p,class:"shape-canvas"}))),128)),(d(!0),f(v,null,w(h.image.wall_shape.shapes,(l,t)=>(d(),f("div",{key:t,ref_for:!0,ref_key:"labelRefs",ref:k,class:"box-index"},R(t+1),1))),128))])]),_:1}),s(m,{class:"d-flex align-center",cols:"5"},{default:a(()=>[i("div",null,[s(g,null,{default:a(()=>[s(m,null,{default:a(()=>[i("h4",D," Wall "+R(S.selectedWall+1)+" Selected ",1),O,G]),_:1})]),_:1}),s(g,null,{default:a(()=>[s(m,null,{default:a(()=>[s(_(z),{breakpoints:M},{addons:a(()=>[s(_(H))]),default:a(()=>[(d(!0),f(v,null,w(_(I),l=>(d(),W(_(X),{key:l.image},{default:a(()=>[i("div",J,[i("div",K,[i("img",{src:l.image},null,8,Q)])])]),_:2},1024))),128))]),_:1})]),_:1})]),_:1}),s(g,null,{default:a(()=>[s(m,{class:"d-flex gap-x-3"},{default:a(()=>[s(j,{to:{name:"visualizer-editing"}},{default:a(()=>[B(" Edit Wall ")]),_:1}),s(j,{onClick:o[0]||(o[0]=()=>e.emit("proceed","selectWall"))},{default:a(()=>[B(" Proceed ")]),_:1})]),_:1})]),_:1})])]),_:1})]),_:1})]),_:1}))}});export{Z as default};
