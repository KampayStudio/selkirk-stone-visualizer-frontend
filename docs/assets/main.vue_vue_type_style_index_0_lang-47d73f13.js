import{d as D,e as E,ao as P,o as f,p as T,w as l,q as a,$ as h,a0 as u,i as n,g as m,F as S,H as V,I as B,C as I,s as R,v as _,ap as F}from"./index-0bfe417c.js";const H={class:"image-container"},N=["src"],X={class:"d-flex flex-row align-center"},Y=n("h1",{class:"text-body-1"}," Detected wall ",-1),L={class:"d-flex flex-row align-center"},j=n("h1",{class:"text-body-1"}," Added wall ",-1),z={class:"text-h4"},O=n("p",{class:"text-body-2 mt-3"},[_(" Are you satisfied with the wall detection? "),n("br"),_("Proceeding will not allow further changes. ")],-1),J=D({__name:"main",props:["image"],emits:["proceed"],setup(d,{emit:q}){const M=d,g=E([]),p=E([]),W=(e,o,c)=>e.map(t=>({x:t.x*o,y:t.y*c})),$=(e,o,c)=>{const t=e.getContext("2d");let s=1/0,i=1/0,x=-1/0,y=-1/0;o.forEach(r=>{s=Math.min(s,r.x),i=Math.min(i,r.y),x=Math.max(x,r.x),y=Math.max(y,r.y)});const v=x-s,b=y-i;e.width=v,e.height=b,e.style.left=`${s}px`,e.style.top=`${i}px`,c.style.left=`${s}px`,c.style.top=`${i}px`,t.clearRect(0,0,v,b),t.fillStyle="rgba(26, 78, 25, 1)",t.beginPath(),o.forEach((r,A)=>{const k=r.x-s,C=r.y-i;A===0?t.moveTo(k,C):t.lineTo(k,C)}),t.closePath(),t.fill()},w=()=>{const e=document.querySelector(".image-container img");if(!e)return;const o=e.clientWidth/e.naturalWidth,c=e.clientHeight/e.naturalHeight;M.image.wall_shape.shapes.forEach((t,s)=>{const i=W(t,o,c);g.value[s]&&$(g.value[s],i,p.value[s])})};return P(()=>{const e=document.querySelector(".image-container img");e.complete?w():e.addEventListener("load",w)}),(e,o)=>(f(),T(F,null,{default:l(()=>[a(h,null,{default:l(()=>[a(u,{cols:"6",class:"d-flex justify-center"},{default:l(()=>[n("div",H,[n("img",{src:d.image.image,class:"img-background"},null,8,N),(f(!0),m(S,null,V(d.image.wall_shape.shapes,(c,t)=>(f(),m("canvas",{key:t,ref_for:!0,ref_key:"canvasRefs",ref:g,class:"shape-canvas"}))),128)),(f(!0),m(S,null,V(d.image.wall_shape.shapes,(c,t)=>(f(),m("div",{key:t,ref_for:!0,ref_key:"labelRefs",ref:p,class:"box-index"},B(t+1),1))),128))])]),_:1}),a(u,{class:"d-flex align-center",cols:"6"},{default:l(()=>[n("div",null,[a(h,null,{default:l(()=>[a(u,{class:"d-flex gap-x-3"},{default:l(()=>[n("div",X,[a(I,{icon:"mdi-square",style:{color:"#38A736"}}),Y]),n("div",L,[a(I,{icon:"mdi-square",style:{color:"#D8BF3A"}}),j])]),_:1})]),_:1}),a(h,null,{default:l(()=>[a(u,null,{default:l(()=>[n("h1",z," Walls Detected: "+B(d.image.wall_shape.shapes.length),1),O]),_:1})]),_:1}),a(h,null,{default:l(()=>[a(u,{class:"d-flex gap-x-3"},{default:l(()=>[a(R,{to:{name:"visualizer-editing"}},{default:l(()=>[_(" Edit Wall ")]),_:1}),a(R,{onClick:o[0]||(o[0]=()=>q("proceed","selectWall"))},{default:l(()=>[_(" Proceed ")]),_:1})]),_:1})]),_:1})])]),_:1})]),_:1})]),_:1}))}});export{J as _};
