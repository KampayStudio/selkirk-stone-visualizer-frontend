import{d as T,e as _,ap as $,o as r,g as i,q as s,w as l,aq as j,H as m,G as b,s as p,v as g,i as w,k as u,F as R,J as M,K as q,L as H}from"./index-b18ceaef.js";const L={class:""},N={class:"image-container"},W=["src"],F=T({__name:"editing",setup(X){const o=_({image:"/temp/sample1.jpeg",wall_shape:{shapes:[[{x:0,y:70},{x:420,y:75},{x:422,y:910},{x:445,y:911},{x:444,y:1008},{x:424,y:1018},{x:424,y:1064},{x:364,y:1064},{x:354,y:1034},{x:354,y:1034},{x:318,y:1069},{x:318,y:1069},{x:285,y:1058},{x:285,y:1058},{x:160,y:1038},{x:0,y:1088},{x:0,y:730},{x:48,y:738},{x:265,y:738},{x:265,y:635},{x:255,y:630},{x:255,y:460},{x:243,y:455},{x:243,y:215},{x:70,y:215},{x:70,y:525},{x:70,y:525},{x:0,y:485}],[{x:420,y:10},{x:860,y:12},{x:860,y:608},{x:690,y:608},{x:690,y:848},{x:862,y:848},{x:862,y:915},{x:420,y:915}],[{x:420,y:1020},{x:860,y:1020},{x:860,y:1065},{x:420,y:1065}],[{x:860,y:75},{x:1280,y:75},{x:1280,y:522},{x:860,y:522}],[{x:860,y:75},{x:1280,y:75},{x:1280,y:522},{x:860,y:522}],[{x:860,y:522},{x:1280,y:522},{x:1280,y:652},{x:1268,y:656},{x:1268,y:1032},{x:1225,y:1032},{x:1215,y:1100},{x:1138,y:1100},{x:1138,y:1073},{x:1092,y:1052},{x:1092,y:1052},{x:860,y:1052},{x:862,y:848},{x:692,y:848},{x:692,y:606},{x:860,y:606}]]}}),f=_([]),v=_([]),B=(e,x,n)=>e.map(t=>({x:t.x*x,y:t.y*n})),D=(e,x,n)=>{const t=e.getContext("2d");let a=1/0,y=1/0,d=-1/0,h=-1/0;x.forEach(c=>{a=Math.min(a,c.x),y=Math.min(y,c.y),d=Math.max(d,c.x),h=Math.max(h,c.y)});const k=d-a,S=h-y;e.width=k,e.height=S,e.style.left=`${a}px`,e.style.top=`${y}px`,n.style.left=`${a}px`,n.style.top=`${y}px`,t.clearRect(0,0,k,S),t.fillStyle="rgba(26, 78, 25, 1)",t.beginPath(),x.forEach((c,I)=>{const V=c.x-a,E=c.y-y;I===0?t.moveTo(V,E):t.lineTo(V,E)}),t.closePath(),t.fill()},C=()=>{const e=document.querySelector(".image-container img");if(!e)return;const x=e.clientWidth/e.naturalWidth,n=e.clientHeight/e.naturalHeight;o.value.wall_shape.shapes.forEach((t,a)=>{const y=B(t,x,n);f.value[a]&&D(f.value[a],y,v.value[a])})};return $(()=>{const e=document.querySelector(".image-container img");e.complete?C():e.addEventListener("load",C)}),(e,x)=>(r(),i("section",L,[s(H,null,{default:l(()=>[s(j,null,{default:l(()=>[s(m,null,{default:l(()=>[s(b,{class:"d-flex gap-x-2"},{default:l(()=>[s(p,null,{default:l(()=>[g(" Draw ")]),_:1}),s(p,null,{default:l(()=>[g(" Delete ")]),_:1})]),_:1})]),_:1}),s(m,{class:"d-flex justify-center"},{default:l(()=>[w("div",N,[w("img",{src:u(o).image,class:"img-background"},null,8,W),(r(!0),i(R,null,M(u(o).wall_shape.shapes,(n,t)=>(r(),i("canvas",{key:t,ref_for:!0,ref_key:"canvasRefs",ref:f,class:"shape-canvas"}))),128)),(r(!0),i(R,null,M(u(o).wall_shape.shapes,(n,t)=>(r(),i("div",{key:t,ref_for:!0,ref_key:"labelRefs",ref:v,class:"box-index"},q(t),1))),128))])]),_:1}),s(m,null,{default:l(()=>[s(b,{cols:"12",class:"d-flex flex-row align-center justify-space-between"},{default:l(()=>[w("h3",null,"Walls Detected: "+q(u(o).wall_shape.shapes.length),1),s(p,{to:{name:"visualizer"}},{default:l(()=>[g(" Apply Changes ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]))}});export{F as default};
