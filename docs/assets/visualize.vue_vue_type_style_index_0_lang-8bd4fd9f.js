import{d as J,e as u,ao as K,o as b,p as V,w as a,q as l,$ as y,a0 as h,i as s,I as k,k as M,G as Q,g as B,F as N,H as z,aq as F,C as Z,v as W,s as T,ap as ee}from"./index-83519a53.js";import{V as te,a as X}from"./VWindowItem-7cb33da0.js";const se={class:"image-container"},ne=["src"],oe=s("div",{class:"d-flex align-center text-gray text-body-2",style:{"margin-block-end":"35px"}},[s("h6",{class:"text-body-2"},[s("b",null,"Categories")])],-1),ae={class:"text-h6 text-secondary"},le=s("h1",{class:"text-h4"}," Choose Stone Category ",-1),ie=s("p",{class:"text-body-2 mt-3"}," Please choose a stone category you want to apply on the wall. ",-1),re={style:{position:"absolute","z-index":"2",color:"white"}},ce={class:"d-flex align-center text-gray text-body-2",style:{"margin-block-end":"35px"}},de={class:"text-body-2"},me=s("b",null,"Colors",-1),ue={class:"text-h6 text-secondary"},ge=s("h1",{class:"text-h4"}," Choose Stone Color ",-1),pe=s("p",{class:"text-body-2 mt-3"}," Please choose only one stone color you want to apply on the wall. ",-1),he={style:{position:"absolute","z-index":"2",color:"white"}},ye=J({__name:"visualize",props:["image","selected-wall"],emits:["proceed"],setup($,{emit:R}){const x=$,Y=u([{name:"Aged Brick",image:"/temp/stones/aged_brick/Ashen.jpg",status:!0,isInStock:!0,colors:[{name:"Ashen",image:"/temp/stones/aged_brick/Ashen.jpg",show:!0}]},{name:"Chiseled Limestone",image:"/temp/stones/chiseled_limestone/Alabaster.jpg",status:!0,isInStock:!0,colors:[{name:"Alabaster",image:"/temp/stones/chiseled_limestone/Alabaster.jpg",show:!0}]},{name:"Contemporary Brick",image:"/temp/stones/contemporary_brick/Ashen.jpg",status:!0,isInStock:!0,colors:[{name:"Alabaster",image:"/temp/stones/contemporary_brick/Ashen.jpg",show:!0}]},{name:"Country Cliffstone",image:"/temp/stones/country_cliffstone/CC_Alabaster.jpg",status:!0,isInStock:!0,colors:[{name:"Alabaster",image:"/temp/stones/contemporary_brick/Ashen.jpg",show:!0}]},{name:"Field Stone",image:"/temp/stones/field_stone/F_Alpine.jpg",status:!0,isInStock:!0,colors:[{name:"Alpine",image:"/temp/stones/field_stone/F_Alpine.jpg",show:!0}]},{name:"Glacier Stone",image:"/temp/stones/glacier_stone/GlacierStone_Aspen.png",status:!0,isInStock:!0,colors:[{name:"Aspen",image:"/temp/stones/glacier_stone/GlacierStone_Aspen.png",show:!0}]},{name:"Mountain Ledge",image:"/temp/stones/mountain_ledge/ML_Alpine.jpg",status:!0,isInStock:!0,colors:[{name:"Aspen",image:"/temp/stones/mountain_ledge/ML_Alpine.jpg",show:!0}]},{name:"Northen Ledgestone",image:"/temp/stones/northern_ledgestone/NL_Alberta.jpg",status:!0,isInStock:!0,colors:[{name:"Alberta",image:"/temp/stones/northern_ledgestone/NL_Alberta.jpg",show:!0}]},{name:"Rustic Ledgestone",image:"/temp/stones/rustic_ledgestone/RL_Alpine.jpg",status:!0,isInStock:!0,colors:[{name:"Alpine",image:"/temp/stones/rustic_ledgestone/RL_Alpine.jpg",show:!0}]},{name:"Shadow Ledgestone",image:"/temp/stones/shadow_ledgestone/SL_Alpine.jpg",status:!0,isInStock:!0,colors:[{name:"Alpine",image:"/temp/stones/shadow_ledgestone/SL_Alpine.jpg",show:!0}]},{name:"Strip Ledge",image:"/temp/stones/strip_ledge/SL_Alabaster.jpg",status:!0,isInStock:!0,colors:[{name:"Alabaster",image:"/temp/stones/strip_ledge/SL_Alabaster.jpg",show:!0}]}]),C=u([]),A=u([]),I=u(),v=u("categories"),j=u(),P=u(),E=u(),G=(e,o,n)=>e.map(t=>({x:t.x*o,y:t.y*n})),q=e=>new Promise((o,n)=>{const t=new Image;t.src=e,t.onload=()=>o(t),t.onerror=()=>n(new Error("Failed to load image"))}),H=(e,o,n)=>{const t=e.getContext("2d");let i=1/0,c=1/0,d=-1/0,g=-1/0;o.forEach(m=>{i=Math.min(i,m.x),c=Math.min(c,m.y),d=Math.max(d,m.x),g=Math.max(g,m.y)});const _=d-i,w=g-c;e.width=_,e.height=w,e.style.left=`${i}px`,e.style.top=`${c}px`,n.style.left=`${i}px`,n.style.top=`${c}px`,t.clearRect(0,0,_,w),t.fillStyle="rgba(26, 78, 25, 1)",t.beginPath(),o.forEach((m,r)=>{const p=m.x-i,f=m.y-c;r===0?t.moveTo(p,f):t.lineTo(p,f)}),t.closePath(),t.fill()},O=(e,o,n,t)=>{const i=e.getContext("2d");let c=1/0,d=1/0,g=-1/0,_=-1/0;o.forEach(r=>{c=Math.min(c,r.x),d=Math.min(d,r.y),g=Math.max(g,r.x),_=Math.max(_,r.y)});const w=g-c,m=_-d;if(e.width=w,e.height=m,e.style.left=`${c}px`,e.style.top=`${d}px`,n.style.left=`${c}px`,n.style.top=`${d}px`,i.clearRect(0,0,w,m),t){const r=document.createElement("canvas"),p=.03;r.width=t.width*p,r.height=t.height*p,r.getContext("2d").drawImage(t,0,0,r.width,r.height);const S=i.createPattern(r,"repeat");i.fillStyle=S}else{console.error("Image pattern is not available");return}i.beginPath(),o.forEach((r,p)=>{const f=r.x-c,S=r.y-d;p===0?i.moveTo(f,S):i.lineTo(f,S)}),i.closePath(),i.fill()},L=async()=>{const e=x.image.wall_shape.shapes[x.selectedWall],o=G(e,P.value,E.value);if(!I.value)H(C.value,o,A.value);else{const n=await q(j.value.image);O(C.value,o,A.value,n)}};K(()=>{const e=document.querySelector(".image-container img");e.complete?(P.value=e.clientWidth/e.naturalWidth,E.value=e.clientHeight/e.naturalHeight,L()):e.addEventListener("load",L)});const D=e=>{I.value=e,v.value="colors"},U=e=>{j.value=e,console.log(j.value),L()};return(e,o)=>(b(),V(ee,null,{default:a(()=>[l(y,null,{default:a(()=>[l(h,{cols:"6",class:"d-flex justify-center"},{default:a(()=>[s("div",se,[s("img",{src:$.image.image,class:"img-background"},null,8,ne),s("canvas",{ref_key:"canvasRefs",ref:C,style:{opacity:"100"},class:"shape-canvas"},null,512),s("div",{ref_key:"labelRefs",ref:A,class:"box-index"},k(x.selectedWall+1),513)])]),_:1}),l(h,{class:"d-flex align-center",cols:"6"},{default:a(()=>[l(te,{modelValue:M(v),"onUpdate:modelValue":o[1]||(o[1]=n=>Q(v)?v.value=n:null)},{default:a(()=>[l(X,{value:"categories"},{default:a(()=>[s("div",null,[l(y,null,{default:a(()=>[l(h,null,{default:a(()=>[oe,s("div",null,[s("h4",ae," Wall "+k(x.selectedWall+1)+" Selected ",1)]),le,ie]),_:1})]),_:1}),l(y,null,{default:a(()=>[(b(!0),B(N,null,z(M(Y),(n,t)=>(b(),V(h,{key:t,style:{position:"relative","max-inline-size":"12rem"},class:"d-flex justify-center align-center",onClick:i=>D(n)},{default:a(()=>[s("div",re,[s("b",null,k(n.name),1)]),l(F,{src:n.image,width:"12rem",height:"5rem",cover:"",style:{"border-radius":"10px"}},null,8,["src"])]),_:2},1032,["onClick"]))),128))]),_:1})])]),_:1}),l(X,{value:"colors"},{default:a(()=>[s("div",null,[l(y,null,{default:a(()=>[l(h,null,{default:a(()=>[s("div",ce,[s("h6",de,[s("span",{onClick:o[0]||(o[0]=n=>v.value="categories")},"Categories "),l(Z,{icon:"mdi-chevron-right"}),W(),me])]),s("h4",ue," Wall "+k(x.selectedWall+1)+" Selected ",1),ge,pe]),_:1})]),_:1}),l(y,null,{default:a(()=>[(b(!0),B(N,null,z(M(I).colors,(n,t)=>(b(),V(h,{key:t,style:{position:"relative","max-inline-size":"12rem"},class:"d-flex justify-center align-center",onClick:i=>U(n)},{default:a(()=>[s("div",he,[s("b",null,k(n.name),1)]),l(F,{src:n.image,width:"12rem",height:"5rem",cover:"",style:{"border-radius":"10px"}},null,8,["src"])]),_:2},1032,["onClick"]))),128))]),_:1})])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(y,null,{default:a(()=>[l(h,{class:"d-flex gap-x-3"},{default:a(()=>[l(T,{variant:"outlined",onClick:o[2]||(o[2]=()=>R("proceed","selectWall"))},{default:a(()=>[W(" Back ")]),_:1}),l(T,{onClick:o[3]||(o[3]=()=>R("proceed","main"))},{default:a(()=>[W(" Next ")]),_:1})]),_:1})]),_:1})]),_:1}))}});export{ye as _};
