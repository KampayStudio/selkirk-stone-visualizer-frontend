import{d as q,a8 as L,c as N,e as c,ap as P,r as T,k as t,o as B,p as F,w as a,q as e,G as d,L as M,M as U,i as r,V as z,t as V,P as D,v as p,K as f,aq as w,S as E,H as _,s as v,N as y,O as x,bi as G,ar as H,x as K,Z as h}from"./index-7a81ad94.js";import{r as k,e as O}from"./validators-c9ab5527.js";import{V as Z}from"./VForm-5ceef55b.js";import{V as C}from"./VTextField-34f7eac4.js";import{V as $}from"./VCheckbox-437da642.js";import{b as S}from"./route-block-83d24a4e.js";import"./VInput-6bf6b22d.js";import"./forwardRefs-a29b5f65.js";import"./easing-9f15041e.js";import"./VCheckboxBtn-f64edf0f.js";import"./VSelectionControl-553768e5.js";const A={class:"d-flex"},J={class:"text-h4 mb-1"},Q={class:"mb-0"},W={class:"d-flex align-center flex-wrap justify-space-between mt-2 mb-4"},X={class:"position-relative w-100"},Y={class:"d-flex align-center justify-center w-100",style:{"max-block-size":"100vh","object-fit":"cover"}},ee=q({__name:"login",setup(te){const g=L(),I=N(),i=c(!1),o=c({userid:"",password:"",remember:!1}),R=async()=>{i.value=!0;try{const s=await h.post("/users/login/",{email:o.value.userid,password:o.value.password},{withCredentials:!0});localStorage.setItem("authToken",s.data.jwt),localStorage.setItem("first_name",s.data.first_name),localStorage.setItem("last_name",s.data.last_name),localStorage.setItem("address",s.data.address),localStorage.setItem("contact_number",s.data.contact_number),localStorage.setItem("email",s.data.email),i.value=!1,I.replace(g.query.to?String(g.query.to):"/")}catch(s){console.error("Login error:",s),i.value=!1}},m=c(!1),u=c({logo:"",banner:"",heading_1:"",heading_2:"",body:""}),j=async()=>{try{const s=await h.get("/contents/login_page/");u.value=s.data[0]}catch(s){console.log(s)}};return P(()=>{j()}),(s,l)=>{const b=T("RouterLink");return t(u).body?(B(),F(_,{key:0,class:"auth-wrapper",style:{"max-inline-size":"300rem"}},{default:a(()=>[e(d,{cols:"12",md:"4",class:"auth-card-v2 d-flex align-center justify-center",style:{"background-color":"rgb(var(--v-theme-surface))"}},{default:a(()=>[e(M,{flat:"","max-width":800,class:"mt-12 mt-sm-0 pa-6"},{default:a(()=>[e(U,{class:"justify-start"},{prepend:a(()=>[e(b,{to:"/"},{default:a(()=>[r("div",A,[e(t(z),{nodes:t(V).app.logo},null,8,["nodes"])])]),_:1})]),default:a(()=>[e(D,{class:"auth-title"},{default:a(()=>[p(f(t(V).app.title),1)]),_:1})]),_:1}),e(w,null,{default:a(()=>[r("h6",J,f(t(u).heading_1),1),r("p",Q,f(t(u).body),1)]),_:1}),e(w,null,{default:a(()=>[e(t(Z),{onSubmit:E(R,["prevent"])},{default:a(()=>[e(_,null,{default:a(()=>[e(d,{cols:"12"},{default:a(()=>[e(C,{modelValue:t(o).userid,"onUpdate:modelValue":l[0]||(l[0]=n=>t(o).userid=n),autofocus:"",label:"Email",type:"text",rules:[t(k),t(O)]},null,8,["modelValue","rules"])]),_:1}),e(d,{cols:"12"},{default:a(()=>[e(C,{modelValue:t(o).password,"onUpdate:modelValue":l[1]||(l[1]=n=>t(o).password=n),label:"Password",type:t(m)?"text":"password","append-inner-icon":t(m)?"bx-hide":"bx-show",required:"",rules:[t(k)],"onClick:appendInner":l[2]||(l[2]=n=>m.value=!t(m))},null,8,["modelValue","type","append-inner-icon","rules"]),r("div",W,[e($,{modelValue:t(o).remember,"onUpdate:modelValue":l[3]||(l[3]=n=>t(o).remember=n),label:"Remember me"},null,8,["modelValue"]),e(b,{class:"text-primary ms-2",to:{name:"forgot-password"}},{default:a(()=>[p(" Forgot Password? ")]),_:1})]),e(_,null,{default:a(()=>[e(d,{cols:"12",md:"4"},{default:a(()=>[e(v,{type:"submit",block:""},{default:a(()=>[y(r("div",null," Login ",512),[[x,!t(i)]]),y(e(G,{indeterminate:"",color:"white"},null,512),[[x,t(i)]])]),_:1})]),_:1}),e(d,{cols:"12",md:"4"},{default:a(()=>[e(v,{block:"",class:"mb-1",variant:"outlined",to:{name:"register"}},{default:a(()=>[p(" Signup ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1})]),_:1}),e(d,{md:"8",class:"d-none d-md-flex"},{default:a(()=>[r("div",X,[r("div",Y,[e(H,{src:t(u).banner},null,8,["src"])])])]),_:1})]),_:1})):K("",!0)}}});typeof S=="function"&&S(ee);export{ee as default};
