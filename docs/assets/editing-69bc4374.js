import{d as T,e as _,ao as j,o as r,g as i,q as s,w as l,ap as q,$ as m,a0 as b,s as p,v as g,i as w,k as u,F as R,H as I,I as M,J as H}from"./index-3d307b47.js";const N={class:""},W={class:"image-container"},X=["src"],L=T({__name:"editing",setup(Y){const o=_({image:"/temp/sample1.jpeg",wall_shape:{shapes:[[{x:0,y:70},{x:420,y:75},{x:422,y:910},{x:445,y:911},{x:444,y:1008},{x:424,y:1018},{x:424,y:1064},{x:364,y:1064},{x:354,y:1034},{x:354,y:1034},{x:318,y:1069},{x:318,y:1069},{x:285,y:1058},{x:285,y:1058},{x:160,y:1038},{x:0,y:1088},{x:0,y:730},{x:48,y:738},{x:265,y:738},{x:265,y:635},{x:255,y:630},{x:255,y:460},{x:243,y:455},{x:243,y:215},{x:70,y:215},{x:70,y:525},{x:70,y:525},{x:0,y:485}],[{x:420,y:10},{x:860,y:12},{x:860,y:608},{x:690,y:608},{x:690,y:848},{x:862,y:848},{x:862,y:915},{x:420,y:915}],[{x:420,y:1020},{x:860,y:1020},{x:860,y:1065},{x:420,y:1065}],[{x:860,y:75},{x:1280,y:75},{x:1280,y:522},{x:860,y:522}],[{x:860,y:75},{x:1280,y:75},{x:1280,y:522},{x:860,y:522}],[{x:860,y:522},{x:1280,y:522},{x:1280,y:652},{x:1268,y:656},{x:1268,y:1032},{x:1225,y:1032},{x:1215,y:1100},{x:1138,y:1100},{x:1138,y:1073},{x:1092,y:1052},{x:1092,y:1052},{x:860,y:1052},{x:862,y:848},{x:692,y:848},{x:692,y:606},{x:860,y:606}]]}}),f=_([]),v=_([]),$=(e,x,n)=>e.map(a=>({x:a.x*x,y:a.y*n})),B=(e,x,n)=>{const a=e.getContext("2d");let t=1/0,y=1/0,d=-1/0,h=-1/0;x.forEach(c=>{t=Math.min(t,c.x),y=Math.min(y,c.y),d=Math.max(d,c.x),h=Math.max(h,c.y)});const k=d-t,S=h-y;e.width=k,e.height=S,e.style.left=`${t}px`,e.style.top=`${y}px`,n.style.left=`${t}px`,n.style.top=`${y}px`,a.clearRect(0,0,k,S),a.fillStyle="rgba(26, 78, 25, 1)",a.beginPath(),x.forEach((c,D)=>{const V=c.x-t,E=c.y-y;D===0?a.moveTo(V,E):a.lineTo(V,E)}),a.closePath(),a.fill()},C=()=>{const e=document.querySelector(".image-container img");if(!e)return;const x=e.clientWidth/e.naturalWidth,n=e.clientHeight/e.naturalHeight;o.value.wall_shape.shapes.forEach((a,t)=>{const y=$(a,x,n);f.value[t]&&B(f.value[t],y,v.value[t])})};return j(()=>{const e=document.querySelector(".image-container img");e.complete?C():e.addEventListener("load",C)}),(e,x)=>(r(),i("section",N,[s(H,null,{default:l(()=>[s(q,null,{default:l(()=>[s(m,null,{default:l(()=>[s(b,{class:"d-flex gap-x-2"},{default:l(()=>[s(p,null,{default:l(()=>[g(" Draw ")]),_:1}),s(p,null,{default:l(()=>[g(" Delete ")]),_:1})]),_:1})]),_:1}),s(m,{class:"d-flex justify-center"},{default:l(()=>[w("div",W,[w("img",{src:u(o).image,class:"img-background"},null,8,X),(r(!0),i(R,null,I(u(o).wall_shape.shapes,(n,a)=>(r(),i("canvas",{key:a,ref_for:!0,ref_key:"canvasRefs",ref:f,class:"shape-canvas"}))),128)),(r(!0),i(R,null,I(u(o).wall_shape.shapes,(n,a)=>(r(),i("div",{key:a,ref_for:!0,ref_key:"labelRefs",ref:v,class:"box-index"},M(a),1))),128))])]),_:1}),s(m,null,{default:l(()=>[s(b,{cols:"12",class:"d-flex flex-row align-center justify-space-between"},{default:l(()=>[w("h3",null,"Walls Detected: "+M(u(o).wall_shape.shapes.length),1),s(p,{to:{name:"visualizer"}},{default:l(()=>[g(" Apply Changes ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]))}});export{L as default};
